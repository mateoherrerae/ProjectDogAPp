# Dog Service - Resumen TÃ©cnico ðŸ¶

### DescripciÃ³n General
Microservicio encargado de la gestiÃ³n de perfiles caninos, con integraciÃ³n segura al servicio de usuarios mediante JWT. Ofrece operaciones CRUD para perros y control de visibilidad de perfiles.

---

### CaracterÃ­sticas Clave
- **Registro de Perros**:
    - Campos: nombre, raza, edad, peso, historial mÃ©dico, cuidados especiales.
    - ValidaciÃ³n de datos con Hibernate Validator (`@NotBlank`, `@Positive`, etc).
- **AutorizaciÃ³n por Roles**:
    - `OWNER`: Permite gestiÃ³n exclusiva de sus perros.
    - `ADMIN`: Acceso total.
- **ComunicaciÃ³n entre Servicios**:
    - Usa Feign Client para obtener username del dueÃ±o desde el User Service.
- **Seguridad JWT**:
    - ValidaciÃ³n de tokens y extracciÃ³n de claims (`userId`, `roles`).

---

### Stack TecnolÃ³gico
| CategorÃ­a          | TecnologÃ­as/Herramientas                              |
|---------------------|-------------------------------------------------------|
| Lenguaje           | Java 17                                               |
| Framework          | Spring Boot 3.2.x                                     |
| Seguridad          | Spring Security, JWT (jjwt)                           |
| Base de Datos      | PostgreSQL, Spring Data JPA                           |
| ComunicaciÃ³n       | OpenFeign                                             |
| DocumentaciÃ³n      | Swagger/OpenAPI                                       |
| Herramientas       | Lombok, Hibernate Validator, Maven/Gradle             |

---

### Endpoints Principales
| MÃ©todo | Ruta                     |                          DescripciÃ³n | Rol Requerido  |
|--------|--------------------------|-------------------------------------:|----------------|
| POST   | `/api/dogs`              |                    Crear nuevo perro | OWNER          |
| GET    | `/api/dogs/{dogId}`      |     Obtener perfil (pÃºblico/privado) | PÃºblico*       |
| GET    | `/api/dogs/owner/{id}`   |            Listar perros de un dueÃ±o | OWNER o ADMIN  |
| PUT    | `/api/dogs/{dogId}`      |                     Actualizar perro | OWNER          |
| DELETE | `/api/dogs/{dogId}`      |                       Eliminar perro | OWNER          |

*Los perfiles privados solo son visibles para dueÃ±os y admins.

```mermaid
sequenceDiagram
Cliente->>+Dog Service: POST /api/dogs (con JWT)
Dog Service->>User Service: GET /api/users/{userId}/username (via Feign + JWT)
User Service-->>Dog Service: username
Dog Service->>DB: INSERT dog (owner_id = userId)
Dog Service-->>-Cliente: 201 Created + DogResponse

---

### Estructura de Clases
```bash
src/
â”œâ”€â”€ main/
â”‚   â”œâ”€â”€ java/com/example/dogservice/
â”‚   â”‚   â”œâ”€â”€ controller/       # DogController (REST endpoints)
â”‚   â”‚   â”œâ”€â”€ model/            # Dog (Entity), DogRequest (DTO), DogResponse (DTO)
â”‚   â”‚   â”œâ”€â”€ repository/       # DogRepository (JPA)
â”‚   â”‚   â”œâ”€â”€ service/          # DogService (lÃ³gica de negocio), JwtService (validaciÃ³n tokens)
â”‚   â”‚   â”œâ”€â”€ config/           # SecurityConfig, FeignConfig
â”‚   â”‚   â””â”€â”€ exception/        # DogNotFoundException, GlobalExceptionHandler




